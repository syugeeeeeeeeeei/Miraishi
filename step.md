### 🗺️ 開発ロードマップ：未来視 (Miraishi)

#### ステップ1: 🎨 基盤づくり（テーマ定義とデータ構造の決定）

**目的:** アプリ開発の土台を固めます。最初にアプリ全体のデザインルールと、扱うデータの「形」を決めることで、後の開発で一貫性が保たれ、手戻りが少なくなります。

1.  **テーマの定義 (`src/renderer/src/theme/index.ts`)**:
    要件定義にあるアプリのカラーパレット（オフホワイト、ネイビー、Tealなど）や、コンポーネントの共通スタイル（角丸の大きさなど）をChakra UIのテーマファイルに設定します。
2.  **型定義 (`src/renderer/src/types/*.d.ts`)**:
    アプリケーションで扱う全てのデータの「設計図」を作成します。例えば、「シナリオ」とは具体的にどのような情報（基本給、手当リスト、成長率など）を持つのかをTypeScriptの型として定義します。これは開発における最も重要な契約書になります。

#### ステップ2: 🧠 アプリの記憶装置（状態管理の準備）

**目的:** アプリケーション全体で共有・利用するデータ（状態）を管理する仕組みを準備します。

1.  **Atomの定義 (`src/renderer/src/atoms/*.ts`)**:
    Jotaiを使い、アプリケーションの状態を管理する大元となる`atom`を定義します。例えば、「現在編集中のシナリオデータ」を保持するatomや、「保存されているシナリオの一覧」を保持するatom、「コントロールパネルが開いているか」を管理するatomなどを作成します。

#### ステップ3: ⚙️ 中核機能の実装（UIから独立したロジック）

**目的:** 見た目（UI）とは切り離して、アプリの心臓部となる計算やデータ操作のロジックを実装します。これにより、ロジック単体でのテストが容易になります。

1.  **計算ロジック (`src/renderer/src/hooks/useTaxCalculator.ts`)**:
    額面の給与情報から、税金や社会保険料を差し引いた手取り額を算出する複雑な計算ロジックを、カスタムフックとして実装します。
2.  **データ永続化ロジック (`src/renderer/src/services/scenarioManager.ts`)**:
    作成したシナリオをPCのローカルストレージに保存、読み込み、削除するための関数群を実装します。ここでは`electron-store`を利用する処理をまとめます。

#### ステップ4: 🏗️ 骨格の構築（レイアウトコンポーネント）

**目的:** アプリケーション全体の画面配置となる大きな枠組みを作成します。この時点では、各パーツの見た目や細かい機能は実装せず、場所を確保するイメージです。

1.  **レイアウト作成 (`src/renderer/src/components/layout/`)**:
    要件定義のレイアウト階層に基づき、「コントロールパネル」や「メインパネル」といった、アプリの骨格となるコンポーネントを作成します。

#### ステップ5: 📝 データ入力画面の作成（DataView）

**目的:** これまで作成した部品（型、状態、ロジック、レイアウト）を組み合わせて、ユーザーが最初に触れる具体的な画面を構築します。

1.  **DataView本体 (`src/renderer/src/views/DataView/index.tsx`)**:
    データ入力セクションと計算結果セクションを配置する親コンポーネントを作成します。
2.  **入力セクション (`InputSection.tsx`)**:
    基本給や手当（動的な追加・削除機能を含む）、残業代などを入力するためのフォーム群を作成します。ユーザーの入力は、ステップ2で定義したJotaiのatomに保存されるようにします。
3.  **計算セクション (`CalculationSection.tsx`)**:
    atomに保存された入力値を監視し、変更があるたびにステップ3の計算ロジック（`useTaxCalculator`）を呼び出して、手取り額などの結果をリアルタイムで表示します。

#### ステップ6: 📈 グラフ表示画面の作成（GraphView）

**目的:** シミュレーション結果を視覚的に表示する、もう一つの主要画面を構築します。

1.  **GraphView本体 (`src/renderer/src/views/GraphView/index.tsx`)**:
    グラフ表示エリアと、グラフを操作するコントロールセクションを配置する親コンポーネントを作成します。要件通り、データビューの上にフロート表示される挙動も考慮します。
2.  **グラフセクション (`GraphSection.tsx`)**:
    `react-chartjs-2`を使い、atomに保存されているシナリオデータを基に、将来の年収・月収推移の折れ線グラフを描画します。
3.  **コントロールセクション (`ControlSection.tsx`)**:
    予測期間を設定するスライダーや、表示項目を切り替えるトグルボタンなど、グラフの表示を調整するための操作パネルを作成します。

#### ステップ7: 🔗 全体の統合と仕上げ

**目的:** 作成したすべての部品を結合し、一つのアプリケーションとして完成させます。

1.  **アプリケーションルート (`src/renderer/src/App.tsx`)**:
    `DataView`と`GraphView`を配置し、それらの表示を切り替えるロジックを実装します。全体のレイアウトをここに集約します。
2.  **Electron連携 (`src/main/index.ts`, `src/preload/index.ts`)**:
    アプリケーションのウィンドウを生成する処理を記述し、レンダラープロセス（UI側）からシナリオ保存などのOS機能（`electron-store`）を安全に呼び出せるように、メインプロセスとの「橋渡し」を設定します。
